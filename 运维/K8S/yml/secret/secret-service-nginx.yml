apiVersion: apps/v1
kind: Deployment
metadata:
  name: deploy-nginx
  namespace: test
spec:
  selector:
    matchLabels:
      app: deploy-nginx
  template:
    metadata:
      labels:
        app: deploy-nginx
    spec:
      imagePullSecrets:     # 定义镜像拉取从Secret中读取仓库信息
      - name: harbor-registry # secret名称
      containers:
      - name: nginx
        image: 172.16.96.110/image/harbor_ngx:v1 
---
apiVersion: v1               # service版本
kind: Service                     # service类型
metadata:                         # 元数据
  name: svc-nginx                 # service名称
  namespace: test                 # 名称空间
spec:                             # service详细配置
  type: NodePort                 # 访问方式clusterIP
  ports:                          # 定义service端口信息
    - protocol: TCP               # 端口协议，默认TCP
      port: 80                    # service接收请求的端口，自定义
      targetPort: 80              # 转发给目标容器端口 
      nodePort: 30007
  selector:
    app: deploy-nginx
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
~                                                                                                                                                                                                                                            
"deploy-nginx.yml" 22L, 370B                                                                                                                                                                                               18,10         All